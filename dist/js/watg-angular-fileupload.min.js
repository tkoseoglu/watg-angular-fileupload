/*! watg-angular-autocomplete 2016-10-05 */
!function(){"use strict";angular.module("watgFileuploadModule",["watgFileupload.templates"])}(),function(){"use strict";function watgFileupload(){function link(scope,element){function validateFile(theFile){return function(e){var isValid=!0,image=new Image;image.src=e.target.result,scope.imageSrc=image.src,scope.config.MaxFileSize||(scope.config.MaxFileSize=5242880),scope.config.MaxImageHeight||(scope.config.MaxImageHeight=600),scope.config.MaxImageWidth||(scope.config.MaxImageWidth=600),scope.config.MinImageHeight||(scope.config.MinImageHeight=30),scope.config.MinImageWidth||(scope.config.MinImageWidth=30),image.height>0&&(image.height>scope.config.MaxImageHeight&&(isValid=!1,scope.messages.push("Image "+theFile.name+" ("+image.height+"px) exceeds the max height limit of "+scope.config.MaxImageHeight+"px.")),image.height<scope.config.MinImageHeight&&(isValid=!1,scope.messages.push("Image "+theFile.name+" ("+image.height+"px) does not meet the minimal height limit of "+scope.config.MinImageHeight+"px."))),image.width>0&&(image.width>scope.config.MaxImageWidth&&(isValid=!1,scope.messages.push("Image "+theFile.name+" ("+image.width+"px) exceeds the max width limit of "+scope.config.MaxImageHeight+"px.")),image.width<scope.config.MinImageWidth&&(isValid=!1,scope.messages.push("Image "+theFile.name+" ("+image.width+"px) does not meet the minimal width limit of "+scope.config.MinImageWidth+"px."))),theFile.size>scope.config.MaxFileSize&&(isValid=!1,scope.messages.push("File "+theFile.name+" ("+(theFile.size/1048576).toFixed(2)+" MB) exceeds the max size limit of "+(scope.config.MaxFileSize/1048576).toFixed(2)+" MB.")),isValid&&scope.config.Files&&scope.config.Files.push(theFile),scope.isBusy=!1,scope.$apply()}}try{scope.messages=[],scope.imageSrc="",null!==scope.config&&void 0!==scope.config?element.bind("change",function(e){scope.messages=[];var selectedFiles=(e.srcElement||e.target).files;if(selectedFiles)for(var i=0;i<selectedFiles.length;i++){scope.config.IsBusy=!0,scope.$apply();var selectedFile=selectedFiles[i],selectedFileExtension=selectedFile.name.split(".").pop();if(selectedFileExtension)if(scope.config.AllowedFileExtensions.indexOf(selectedFileExtension.toLowerCase())>=0){var reader=new FileReader;reader.readAsDataURL(selectedFile),reader.onload=validateFile(selectedFile)}else scope.messages.push("Invalid File Extension "+selectedFileExtension);scope.config.IsBusy=!1,scope.$apply()}else scope.messages.push("File not found")}):console.error("watg-angular-fileupload: No configuration found")}catch(e){console.error("watg-angular-fileupload: error "+e)}}return{restrict:"E",templateUrl:"src/app/directives/templates/watgFileuploadTemplate.html",scope:{config:"="},link:link}}angular.module("watgFileuploadModule").directive("watgFileupload",watgFileupload)}();